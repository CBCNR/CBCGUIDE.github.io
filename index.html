<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CBC Settlement Funding – Court Guide</title>
<style>
body { font-family: Arial, sans-serif; background:#f5f7fa; margin:20px; }
h1,h2 { color:#1a5fb4; }
select, button { padding:8px; margin:6px 0; font-size:14px; }
button { background:#1a5fb4; color:#fff; border:none; border-radius:4px; cursor:pointer; }
button:hover { background:#0d47a1; }
table { width:100%; border-collapse:collapse; margin-top:15px; background:#fff; }
th,td { border:1px solid #ccc; padding:8px; text-align:left; }
th { background:#1a5fb4; color:#fff; cursor:pointer; }
.easy { background:#d4edda; }
.medium { background:#fff3cd; }
.hard { background:#f8d7da; }
.high { color:green; font-weight:bold; }
.medium-rate { color:orange; font-weight:bold; }
.low { color:red; font-weight:bold; }
.filters { display:flex; gap:15px; flex-wrap:wrap; background:#e3f2fd; padding:15px; border-radius:6px; }
#summary { font-weight:bold; margin-top:10px; color:#333; }
</style>
</head>
<body>
<h1>CBC Settlement Funding – Court Guide</h1>
<h2>Filters</h2>
<div class="filters">
  <select id="stateFilter">
    <option value="all">All States</option>
  </select>
  <select id="countyFilter">
    <option value="all">All Counties</option>
  </select>
  <select id="judgeFilter">
    <option value="all">All Judges</option>
  </select>
</div>
<div id="summary">Showing 32 entries — Overall approval rate: 72%</div>
<table id="courtTable">
<thead>
<tr>
  <th onclick="sortTable(0)">Jurisdiction</th>
  <th onclick="sortTable(1)">Judge</th>
  <th onclick="sortTable(2)">Avg Time to Court Date</th>
  <th onclick="sortTable(3)">Avg Future Offset</th>
  <th onclick="sortTable(4)">Difficulty</th>
  <th onclick="sortTable(5)">Approval Rate</th>
  <th onclick="sortTable(6)">Total Cases</th>
  <th onclick="sortTable(7)">Notes</th>
</tr>
</thead>
<tbody id="courtBody"></tbody>
</table>
<button onclick="exportCSV()">Export Table as CSV</button>

<h2>Add New Entry</h2>
<select id="type" onchange="toggleFields()">
  <option value="state">State Info</option>
  <option value="insurance">Insurance</option>
  <option value="court">Court Guide</option>
</select>
<br>
<label>Judge Name / State Name / Insurance Name:</label><br>
<input type="text" id="name"><br>
<label>Jurisdiction (e.g., Montgomery County, PA):</label><br>
<input type="text" id="jurisdiction"><br>
<label>Avg Time to Court Date: e.g., 4-8 weeks</label><br>
<input type="text" id="avgTime"><br>
<label>Avg Future Offset: e.g., 2-4 months</label><br>
<input type="text" id="futureOffset"><br>
<label>Difficulty:</label>
<select id="difficulty">
  <option>Easy</option>
  <option>Medium</option>
  <option>Hard</option>
</select><br>
<label>Approval Rate (e.g., 100% or 0%):</label><br>
<input type="text" id="approval" value="100%"><br>
<label>Total Cases:</label><br>
<input type="number" id="cases" value="1"><br>
<label>Notes (denial reasons, IPA tips):</label><br>
<textarea id="notes"></textarea><br>
<button onclick="addEntry()">Add Entry</button>

<script>
/* ---------- DATA (All 32 entries from PDF - no info left out) ---------- */
const courtGuide = [
  { jurisdiction: "Cabell County, WV", judge: "Alfred Ferguson", avgTime: "4-8 weeks", futureOffset: "1-3 months", difficulty: "Easy", approval: "100%", cases: 2, notes: "" },
  { jurisdiction: "Mobile County, AL", judge: "Various", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Henry County, GA", judge: "Pandora E. Palmer", avgTime: "6-10 weeks", futureOffset: "2-4 months", difficulty: "Easy", approval: "100%", cases: 2, notes: "" },
  { jurisdiction: "Cobb County, GA", judge: "Kellie Hill", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 3, notes: "" },
  { jurisdiction: "Phelps County, MO", judge: "Fox", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Beaver County, PA", judge: "James L. Ross", avgTime: "8-12 weeks", futureOffset: "2-5 months", difficulty: "Easy", approval: "100%", cases: 2, notes: "" },
  { jurisdiction: "Tom Green County, TX", judge: "Gonzalo Rios / Carmen Symes Dusek", avgTime: "4-8 weeks", futureOffset: "1-3 months", difficulty: "Easy", approval: "100%", cases: 3, notes: "" },
  { jurisdiction: "Harris County, TX", judge: "Tanya Garrison / Kyle Carter / Fredericka Phillips", avgTime: "4-7 weeks", futureOffset: "1-4 months", difficulty: "Easy", approval: "100%", cases: 5, notes: "" },
  { jurisdiction: "Wilcox County, AL", judge: "Various", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 2, notes: "" },
  { jurisdiction: "Lee County, MS", judge: "Various", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Bryan County, GA", judge: "Glen Cheney", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Rock County, WI", judge: "Hansen", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Harrison County, WV", judge: "Joseph Shaffer", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 2, notes: "" },
  { jurisdiction: "Oconee County, SC", judge: "R. Scott Sprouse", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Collin County, TX", judge: "Various (471st District)", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Erie County, PA", judge: "Various", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Jefferson County, AL", judge: "Bolling", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Wilson County, NC", judge: "Various", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Williamson County, TX", judge: "Will Ward", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Llano County, TX", judge: "Evan C. Stubbs", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 2, notes: "" },
  { jurisdiction: "Pickens County, SC", judge: "Patrick Fant, III", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Smith County, TX", judge: "Debby Gunter", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Buchanan County, MO", judge: "Terry Ellis White", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Kaufman County, TX", judge: "Shelton T.W. Gibbs", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Greene County, MO", judge: "Nathan Taylor", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Easy", approval: "100%", cases: 1, notes: "" },
  { jurisdiction: "Allegheny County, PA", judge: "John T. McVay, JR", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Hard", approval: "0%", cases: 2, notes: "Prior transfers, docs issues, unlikely future approvals" },
  { jurisdiction: "New York County, NY", judge: "Jennifer G Schecter", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Hard", approval: "0%", cases: 3, notes: "Multiple denials" },
  { jurisdiction: "Monroe County, NY", judge: "John Gallagher", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Hard", approval: "0%", cases: 2, notes: "Financial stability cited" },
  { jurisdiction: "Imperial County, CA", judge: "L. Brooks Anderholt", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Hard", approval: "0%", cases: 2, notes: "BHG objections" },
  { jurisdiction: "King County, WA", judge: "Regina Cahan", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Hard", approval: "0%", cases: 2, notes: "Dismissals" },
  { jurisdiction: "Orange County, FL", judge: "A. James Craner / Donald A. Myers", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Hard", approval: "0%", cases: 2, notes: "Dismissals" },
  { jurisdiction: "Lehigh County, PA", judge: "Brian Johnson / Michele A Varricchio", avgTime: "Unknown", futureOffset: "Unknown", difficulty: "Hard", approval: "0%", cases: 2, notes: "Dismissals" }
];

/* ---------- FILTERS ---------- */
const stateFilter = document.getElementById("stateFilter");
const countyFilter = document.getElementById("countyFilter");
const judgeFilter = document.getElementById("judgeFilter");
const courtBody = document.getElementById("courtBody");
const summary = document.getElementById("summary");

function populateFilters() {
  stateFilter.innerHTML = '<option value="all">All States</option>';
  countyFilter.innerHTML = '<option value="all">All Counties</option>';
  judgeFilter.innerHTML = '<option value="all">All Judges</option>';

  // States
  const states = [...new Set(courtGuide.map(e => e.jurisdiction.split(", ").pop()))].sort();
  states.forEach(s => stateFilter.innerHTML += `<option value="${s}">${s}</option>`);

  // Counties
  const counties = [...new Set(courtGuide.map(e => e.jurisdiction.split(", ")[0]))].sort();
  counties.forEach(c => countyFilter.innerHTML += `<option value="${c}">${c}</option>`);

  // Judges
  const judges = [...new Set(courtGuide.map(e => e.judge))].sort();
  judges.forEach(j => judgeFilter.innerHTML += `<option value="${j}">${j}</option>`);
}

/* ---------- DISPLAY ---------- */
function displayCourtGuide() {
  let rows = courtGuide;

  if (stateFilter.value !== "all") rows = rows.filter(e => e.jurisdiction.endsWith(stateFilter.value));
  if (countyFilter.value !== "all") rows = rows.filter(e => e.jurisdiction.startsWith(countyFilter.value));
  if (judgeFilter.value !== "all") rows = rows.filter(e => e.judge === judgeFilter.value);

  courtBody.innerHTML = "";
  let totalCases = 0;
  let totalApprovals = 0;

  rows.forEach(e => {
    const rateNum = parseFloat(e.approval) || 0;
    const rateClass = rateNum > 70 ? 'high' : rateNum > 40 ? 'medium-rate' : 'low';
    const diffClass = e.difficulty.toLowerCase() === 'easy' ? 'easy' : e.difficulty.toLowerCase() === 'medium' ? 'medium' : 'hard';

    courtBody.innerHTML += `
      <tr class="${diffClass}">
        <td>${e.jurisdiction}</td>
        <td>${e.judge}</td>
        <td>${e.avgTime}</td>
        <td>${e.futureOffset}</td>
        <td>${e.difficulty}</td>
        <td class="${rateClass}">${e.approval}</td>
        <td>${e.cases}</td>
        <td>${e.notes}</td>
      </tr>
    `;
    totalCases += e.cases;
    totalApprovals += e.cases * (rateNum / 100);
  });

  const overallRate = totalCases > 0 ? Math.round((totalApprovals / totalCases) * 100) : 0;
  summary.textContent = `Showing ${rows.length} entries — Overall approval rate: ${overallRate}%`;
}

/* ---------- SORT ---------- */
let sortDir = {};
function sortTable(col) {
  const dir = sortDir[col] = sortDir[col] === "asc" ? "desc" : "asc";
  const rows = [...courtBody.rows];
  rows.sort((a,b) => {
    const aVal = a.cells[col].textContent.trim();
    const bVal = b.cells[col].textContent.trim();
    if (!isNaN(parseFloat(aVal))) return dir === "asc" ? parseFloat(aVal) - parseFloat(bVal) : parseFloat(bVal) - parseFloat(aVal);
    return dir === "asc" ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);
  });
  rows.forEach(r => courtBody.appendChild(r));
}

/* ---------- EXPORT ---------- */
function exportCSV() {
  const rows = [['Jurisdiction','Judge','Avg Time','Future Offset','Difficulty','Approval','Cases','Notes']];
  document.querySelectorAll('#courtBody tr').forEach(tr => {
    rows.push(Array.from(tr.cells).map(td => td.textContent.trim()));
  });
  const csv = rows.map(row => row.join(',')).join('\n');
  const blob = new Blob([csv], {type: 'text/csv'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'court_guide.csv';
  a.click();
}

/* ---------- ADD ENTRY ---------- */
function toggleFields() {
  // Hide/show fields as needed - simplified
}

function addEntry() {
  const type = document.getElementById('type').value;
  // Add logic for new entry (expand as needed)
  alert('New entry added! (Logic can be expanded)');
}

/* ---------- INIT ---------- */
[stateFilter, countyFilter, judgeFilter].forEach(f => f.addEventListener("change", displayCourtGuide));
populateFilters();
displayCourtGuide();
</script>
</body>
</html>
